<!-- ===================================
     LOGIN CON ANGULAR ANIMATIONS
     Archivo: src/app/components/login/login.html
     âœ… Sin botÃ³n de cuenta de prueba
     âœ… Con animaciones fluidas
     =================================== -->

<div class="login-container">
  <!-- ğŸ¬ AnimaciÃ³n en la tarjeta principal -->
  <div class="login-card" [@cardAnimation]>
    
    <!-- Logo y tÃ­tulo -->
    <div class="login-header">
      <div class="logo">ğŸ“¦</div>
      <h1>Inventario Pro</h1>
      <p>{{ mostrarLogin() ? 'Inicia sesiÃ³n en tu cuenta' : 'Crea tu cuenta' }}</p>
    </div>

    <!-- ğŸ¬ Mensajes con animaciÃ³n -->
    @if (mensajeError()) {
      <div class="alert alert-error" [@alertAnimation]>
        âš ï¸ {{ mensajeError() }}
      </div>
    }

    @if (mensajeExito()) {
      <div class="alert alert-success" [@alertAnimation]>
        âœ… {{ mensajeExito() }}
      </div>
    }

    <!-- ğŸ¬ FORMULARIO DE LOGIN con animaciÃ³n -->
    @if (mostrarLogin()) {
      <form (ngSubmit)="handleLogin()" class="login-form" [@formAnimation]>
        <div class="form-group">
          <label for="loginEmail">
            <span>Correo ElectrÃ³nico</span>
            <span class="icon">ğŸ“§</span>
          </label>
          <input
            type="email"
            id="loginEmail"
            [(ngModel)]="loginEmail"
            name="loginEmail"
            placeholder="tu@email.com"
            [disabled]="cargando()"
            required
          />
        </div>

        <div class="form-group">
          <label for="loginPassword">
            <span>ContraseÃ±a</span>
            <span class="icon">ğŸ”’</span>
          </label>
          <div class="password-input-wrapper">
            <input
              [type]="mostrarPasswordLogin() ? 'text' : 'password'"
              id="loginPassword"
              [(ngModel)]="loginPassword"
              name="loginPassword"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
              [disabled]="cargando()"
              required
            />
            <button 
              type="button" 
              class="toggle-password"
              (click)="togglePasswordLogin()"
              [disabled]="cargando()"
              tabindex="-1"
            >
              {{ mostrarPasswordLogin() ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
            </button>
          </div>
        </div>

        <!-- ğŸ¬ BotÃ³n con animaciÃ³n -->
        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="cargando()"
          [@buttonAnimation]
        >
          @if (cargando()) {
            <span class="spinner" [@spinnerAnimation]></span> 
            <span>Iniciando sesiÃ³n...</span>
          } @else {
            <span>Iniciar SesiÃ³n</span>
            <span class="arrow">â†’</span>
          }
        </button>
      </form>

      <!-- Footer del login -->
      <div class="login-footer">
        <p>
          Â¿No tienes cuenta?
          <button 
            type="button" 
            class="link-button"
            (click)="alternarFormulario()"
            [disabled]="cargando()"
          >
            RegÃ­strate aquÃ­
          </button>
        </p>
      </div>
    }

    <!-- ğŸ¬ FORMULARIO DE REGISTRO con animaciÃ³n -->
    @if (!mostrarLogin()) {
      <form (ngSubmit)="handleRegistro()" class="login-form" [@formAnimation]>
        <div class="form-group">
          <label for="registroName">
            <span>Nombre Completo</span>
            <span class="icon">ğŸ‘¤</span>
          </label>
          <input
            type="text"
            id="registroName"
            [(ngModel)]="registroName"
            name="registroName"
            placeholder="Juan PÃ©rez"
            [disabled]="cargando()"
            required
          />
        </div>

        <div class="form-group">
          <label for="registroEmail">
            <span>Correo ElectrÃ³nico</span>
            <span class="icon">ğŸ“§</span>
          </label>
          <input
            type="email"
            id="registroEmail"
            [(ngModel)]="registroEmail"
            name="registroEmail"
            placeholder="tu@email.com"
            [disabled]="cargando()"
            required
          />
        </div>

        <div class="form-group">
          <label for="registroPassword">
            <span>ContraseÃ±a</span>
            <span class="icon">ğŸ”’</span>
          </label>
          <div class="password-input-wrapper">
            <input
              [type]="mostrarPasswordRegistro() ? 'text' : 'password'"
              id="registroPassword"
              [(ngModel)]="registroPassword"
              name="registroPassword"
              placeholder="MÃ­nimo 6 caracteres"
              [disabled]="cargando()"
              required
            />
            <button 
              type="button" 
              class="toggle-password"
              (click)="togglePasswordRegistro()"
              [disabled]="cargando()"
              tabindex="-1"
            >
              {{ mostrarPasswordRegistro() ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
            </button>
          </div>
        </div>

        <div class="form-group">
          <label for="registroPasswordConfirm">
            <span>Confirmar ContraseÃ±a</span>
            <span class="icon">ğŸ”</span>
          </label>
          <div class="password-input-wrapper">
            <input
              [type]="mostrarPasswordConfirm() ? 'text' : 'password'"
              id="registroPasswordConfirm"
              [(ngModel)]="registroPasswordConfirm"
              name="registroPasswordConfirm"
              placeholder="Repite tu contraseÃ±a"
              [disabled]="cargando()"
              required
            />
            <button 
              type="button" 
              class="toggle-password"
              (click)="togglePasswordConfirm()"
              [disabled]="cargando()"
              tabindex="-1"
            >
              {{ mostrarPasswordConfirm() ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
            </button>
          </div>
        </div>

        <!-- ğŸ¬ BotÃ³n con animaciÃ³n -->
        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="cargando()"
          [@buttonAnimation]
        >
          @if (cargando()) {
            <span class="spinner" [@spinnerAnimation]></span> 
            <span>Registrando...</span>
          } @else {
            <span>Crear Cuenta</span>
            <span class="arrow">â†’</span>
          }
        </button>
      </form>

      <!-- Footer del registro -->
      <div class="login-footer">
        <p>
          Â¿Ya tienes cuenta?
          <button 
            type="button" 
            class="link-button"
            (click)="alternarFormulario()"
            [disabled]="cargando()"
          >
            Inicia sesiÃ³n
          </button>
        </p>
      </div>
    }
  </div>
</div>