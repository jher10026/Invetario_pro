<!-- ===================================
     TEMPLATE DEL SIDEBAR
     Archivo: src/app/components/shared/sidebar/sidebar.component.html
     =================================== -->

<aside class="sidebar">
  <div class="sidebar-header">
    <div class="logo-icon">ğŸ“¦</div>
    <div class="logo-text">
      <h1>Inventario<span class="accent">Pro</span></h1>
      <p>v3.2.0</p>
    </div>
  </div>

  <nav class="sidebar-nav">
    <div class="nav-section-title">MenÃº</div>
    <a class="nav-item" routerLink="/dashboard" routerLinkActive="active">
      <span>ğŸ“Š</span>
      <span>Dashboard</span>
    </a>
    <a class="nav-item" routerLink="/inventario" routerLinkActive="active">
      <span>ğŸ“¦</span>
      <span>Inventario</span>
    </a>
    <a class="nav-item" routerLink="/categorias" routerLinkActive="active">
      <span>ğŸ·ï¸</span>
      <span>CategorÃ­as</span>
    </a>

    <div class="nav-section-title" *ngIf="usuarioActual">
      {{ usuarioActual.role === 'admin' ? 'AdministraciÃ³n' : 'Soporte' }}
    </div>
    
    <a 
      *ngIf="usuarioActual?.role === 'admin'"
      class="nav-item" 
      routerLink="/reportes" 
      routerLinkActive="active"
    >
      <span>ğŸ“¬</span>
      <span>BuzÃ³n de Reportes</span>
    </a>
    
    <button class="nav-item" (click)="abrirModalReporte()">
      <span>ğŸ“‹</span>
      <span>Reportar Problema</span>
    </button>


  </nav>

  <div class="sidebar-footer">
    <button class="nav-item logout-btn" (click)="logout()">
      <span>ğŸšª</span>
      <span>Salir</span>
    </button>
  </div>
</aside>

<!-- Modal de Reporte -->
<div *ngIf="mostrarModalReporte()" class="modal-overlay" (click)="cerrarModalReporte()">
  <div class="modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>ğŸ“‹ Reportar Problema</h2>
      <button class="close-btn" (click)="cerrarModalReporte()">Ã—</button>
    </div>

    <div class="modal-body">
      <div class="form-group">
        <label>Tipo de Problema</label>
        <select 
          class="form-input" 
          [ngModel]="formReporte().tipo"
          (ngModelChange)="actualizarForm('tipo', $event)"
        >
          <option value="">Selecciona un tipo...</option>
          <option value="error-stock">Error de Stock</option>
          <option value="error-datos">Datos Incorrectos</option>
          <option value="bug">Error en la Plataforma (Bug)</option>
          <option value="mejora">Sugerencia de Mejora</option>
          <option value="consulta">Consulta General</option>
          <option value="otro">Otro</option>
        </select>
      </div>

      <div class="form-group">
        <label>DescripciÃ³n</label>
        <textarea
          class="form-input"
          [ngModel]="formReporte().descripcion"
          (ngModelChange)="actualizarForm('descripcion', $event)"
          rows="5"
          placeholder="Por favor, describe el problema en detalle..."
          style="resize: vertical; min-height: 120px;"
        ></textarea>
      </div>
    </div>

    <div class="modal-actions">
      <button class="btn-cancel" (click)="cerrarModalReporte()">Cancelar</button>
      <button class="btn-save" (click)="enviarReporte()">Enviar Reporte</button>
    </div>
  </div>
</div>